read_resume_pdf:
  description: >
    Use the `read_resume_pdf` tool to read the source resume from:
    `{resume_pdf_path}`
    Return ONLY valid JSON. Do not wrap in markdown.

    Rules:
    - Call the tool and capture the extracted text.
    - Do not invent missing text.
    - Keep content factual and unchanged at this stage.
  expected_output: >
    A JSON object with:
    - source_pdf_path (string)
    - resume_text (string, extracted content)
    - extraction_notes (array of strings)
  agent: resume_reader_writer

review_resume:
  description: >
    Review the extracted resume against AI/software hiring quality and ATS readiness in one pass.
    Evaluate:
    - clarity and scannability
    - ownership and measurable impact
    - technical depth and role relevance
    - keyword signaling and parseability risks
    Use ONLY `resume_text` from prior task. Do not invent facts.
    Return ONLY valid JSON. Do not wrap in markdown.
  expected_output: >
    A JSON object with:
    - strengths (array of strings)
    - high_priority_gaps (array of strings)
    - medium_priority_gaps (array of strings)
    - ats_risks (array of strings)
    - keyword_signal_gaps (array of strings)
    - formatting_fixes (array of strings)
    - section_order_recommendation (array of strings)
    - ai_engineer_fit_assessment (string)
  agent: resume_reviewer
  context: [read_resume_pdf]

finalize_resume_and_write_pdf:
  description: >
    Produce final prioritized feedback and final resume content, then write it as a new PDF.
    Inputs:
    - Extracted resume text from prior task.
    - Consolidated review guidance from prior task.
    - Optional user-requested additions/changes:
      {user_input}

    Use the `write_resume_pdf` tool with:
    - resume_text = final revised resume text
    - output_path = {output_pdf_path}

    Required rules:
    - Preserve factual integrity: do not add facts.
    - Apply valid user updates and report skipped ones.
    - Prioritize fixes for AI engineer hiring outcomes.
    - Ensure output is machine-readable JSON only.
    - `updated_pdf_path` must be the path returned by the tool call.
  expected_output: >
    A JSON object with:
    - final_resume_text (string)
    - updated_pdf_path (string)
    - applied_user_updates (array of strings)
    - skipped_user_updates (array of strings)
    - feedback_items (array of 8-18 objects with:
      category one of ["structure","clarity","impact","skills","experience","projects","education","formatting","ats","ai_focus"],
      severity one of ["high","medium","low"],
      issue string,
      recommendation string,
      example_rewrite optional string)
  agent: hiring_manager
  context: [read_resume_pdf, review_resume]
